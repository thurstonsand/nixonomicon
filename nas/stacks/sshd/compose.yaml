services:
  sshd:
    image: lscr.io/linuxserver/openssh-server:latest
    container_name: sshd
    mac_address: aa:bd:01:b0:b9:04
    networks:
      personal:
        ipv4_address: 192.168.6.227
    ports:
      - 2222:2222
    env_file:
      - ../.env
    environment:
      - PUID=950
      - PGID=544
      - TZ=US/Eastern
      - SUDO_ACCESS=true
      - PASSWORD_ACCESS=false
      - USER_NAME=admin
      - LOG_STDOUT=true
      - DOCKER_MODS=linuxserver/mods:openssh-server-autossh|linuxserver/mods:openssh-server-git|linuxserver/mods:universal-package-install
      - INSTALL_PACKAGES=bat|eza|fzf|git-crypt|htop|starship|zoxide|zsh
    volumes:
      # store any config generated by container
      - /mnt/performance/docker/sshd/config:/config
      # allow docker to be run
      - /var/run/docker.sock:/var/run/docker.sock:ro
      # access to docker files
      - /mnt/performance/docker:/mnt/performance/docker
      # access to dev files
      - /mnt/performance/home/admin/Develop:/mnt/performance/home/admin/Develop

      # config files
      - /mnt/performance/home/admin/Develop/nixonomicon/nas/stacks/sshd/home/.config/git:/config/.config/git:ro
      - /mnt/performance/home/admin/Develop/nixonomicon/nas/stacks/sshd/home/.config/starship.toml:/config/.config/starship.toml:ro
      - /mnt/performance/home/admin/Develop/nixonomicon/nas/stacks/sshd/home/.ssh/authorized_keys:/config/.ssh/authorized_keys:ro
      - /mnt/performance/home/admin/Develop/nixonomicon/nas/stacks/sshd/home/.bash_profile:/config/.bash_profile:ro
      - /mnt/performance/home/admin/Develop/nixonomicon/nas/stacks/sshd/home/.zshrc:/config/.zshrc:ro
    restart: unless-stopped
networks:
  personal:
    external: true
